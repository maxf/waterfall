<!DOCTYPE html>
<html>
  <head>
    <style>
     html {
       font-family: helvetica;
       background: #000;
     }
     body {
       margin: 0;
     }
     table {
       border-collapse: collapse;
       width: 100%;
     }
     td {
       border: 1px solid black;
       width: 1.3em;
       height: 1.3em;
       text-align: center;
       cursor: pointer;
     }
     td.even {
       background: #fcf;
     }
     td.today {
       outline: 5px solid red;
     }
     .outer {
       height: 100vh;
     }
     .year-buttons {
       width: 100%;
     }
     .error {
       position: fixed;
       background: #555;
       color: white;
       font-size: 200%;
       font-weight: bold;
       padding: 1em;
       margin: 1em;
     }
     .columns {
       display: flex;
       height: 100vh;
     }
     .calendar {
       background: white;
       max-width: 20%;
       overflow: auto;
       max-height: 100vh;
       padding: 1em;
     }
     .year-buttons {
       margin: .5em 0;
     }
     .year-buttons button {
       width: 3em;
       padding: 0;
     }
     #photos {
       margin: 1em;
       flex: 1;
       overflow-y: scroll;
       max-height: 100vh;
       color: white;
     }
     #photos ul {
       padding: 0;
       text-align: center;
     }
     #photos li {
       list-style-type: none;
       margin-bottom: 3em;
     }
     #photos li div { text-align: left }
     #photos img {
       max-width: 100%;
       max-height: 100vh;
     }
    </style>
  </head>
  <body>
    <div id="main">
    </div>
    <script>
     const files = window.require('./files');
     const Elm = window.require('./elm');
     const node = document.getElementById('main');
     const app = Elm.Main.embed(node);

     app.ports.deletePhoto.subscribe(fileName => {
       const fileDeleted = files.deleteFile(fileName)
       app.ports.deletePhotoResult.send(fileDeleted);
     });
     app.ports.scanPhotos.subscribe(dir => {
       files.scanPhotos(dir, fileNames => {
         app.ports.scanPhotosResult.send(fileNames);
       })
     });
     app.ports.requestPhotoDir.subscribe(() => {
       const dir = files.requestPhotoDir();
       app.ports.requestPhotoDirResult.send(dir);
     });
     app.ports.saveMetadata.subscribe(metadata => {
       files.saveMetadata(metadata, err => {
         app.ports.saveMetadataResult.send(!err);
       })
     });
     app.ports.loadMetadata.subscribe(() => {
       files.loadMetadata((err, data) => {
         app.ports.loadMetadataResult.send(err ? "" : data.toString());
       })
     });
    </script>
  </body>
</html>
